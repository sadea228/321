import logging
import os

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.DEBUG
)
logger = logging.getLogger(__name__)

# --- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–µ–º—ã ---
DEFAULT_THEME_KEY = "classic"
EMPTY_CELL_SYMBOL = "empty" # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–ª—é—á –¥–ª—è –ø—É—Å—Ç–æ–π –∫–ª–µ—Ç–∫–∏ –≤ —Ç–µ–º–µ

THEMES = {
    "classic": {
        "name": "–ö–ª–∞—Å—Å–∏–∫–∞",
        "X": "‚ùå",
        "O": "‚≠ï",
        EMPTY_CELL_SYMBOL: "‚¨ú",
        "X_win": "‚≠ê‚ùå‚≠ê",
        "O_win": "‚≠ê‚≠ï‚≠ê"
    },
    "animals": {
        "name": "–ñ–∏–≤–æ—Ç–Ω—ã–µ",
        "X": "üê±",
        "O": "üê∂",
        EMPTY_CELL_SYMBOL: "üêæ",
        "X_win": "üèÜüê±üèÜ",
        "O_win": "üèÜüê∂üèÜ"
    },
    "food": {
        "name": "–ï–¥–∞",
        "X": "üçï",
        "O": "üçî",
        EMPTY_CELL_SYMBOL: "‚ñ´Ô∏è",
        "X_win": "üåüüçïüåü",
        "O_win": "üåüüçîüåü"
    }
    # –î–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞ –¥—Ä—É–≥–∏–µ —Ç–µ–º—ã –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏
}

# --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤–µ–±—Ö—É–∫–∞ ---
# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
TOKEN = os.getenv("TOKEN")
if not TOKEN:
    logger.error("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è TOKEN!")
    # –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –ª—É—á—à–µ –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ç–µ—Å—Ç–æ–≤
    # exit(1) # –ù–µ –±—É–¥–µ–º –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–¥–µ—Å—å, –ø—É—Å—Ç—å —ç—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –≤ bot.py –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

# URL –¥–ª—è –≤–µ–±—Ö—É–∫–∞ (Render –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç RENDER_EXTERNAL_URL)
WEBHOOK_URL = os.getenv("RENDER_EXTERNAL_URL")
# –õ–æ–∫–∞–ª—å–Ω—ã–π URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ RENDER_EXTERNAL_URL –Ω–µ –∑–∞–¥–∞–Ω)
if not WEBHOOK_URL:
   logger.warning("RENDER_EXTERNAL_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WEBHOOK_URL –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.")
   WEBHOOK_URL = "https://your-temporary-render-url" # –ó–∞–º–µ–Ω–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–º URL –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –∑–∞–≥–ª—É—à–∫—É

# –ü–æ—Ä—Ç –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (Render –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç PORT)
PORT = int(os.getenv("PORT", "8080"))

# –ü—É—Ç—å –¥–ª—è –≤–µ–±—Ö—É–∫–∞ (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å –≤ set_webhook –∏ –≤ endpoint)
WEBHOOK_PATH = "/webhook"
# –ü–æ–ª–Ω—ã–π URL –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–µ–±—Ö—É–∫–∞ (—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∑–¥–µ—Å—å –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏)
WEBHOOK_ENDPOINT_URL = f"{WEBHOOK_URL}{WEBHOOK_PATH}" if WEBHOOK_URL else None

# –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞
GAME_TIMEOUT_SECONDS = 90 