# Крэк-Нолик (@CrackNolikBot)

Телеграм-бот для игры в крестики-нолики в групповых чатах.

## Функциональность

- Игра в крестики-нолики 3x3
- Работа в групповых чатах
- Случайный выбор первого игрока
- Проверка победителя и ничьи

## Команды бота

- `/start` - Приветственное сообщение с инструкциями
- `/newgame` - Начать новую игру в текущем чате

## Установка и запуск

1. Установите необходимые библиотеки:
- pip install python-telegram-bot==20.*
- pip install aiosend>=2.1.0

2. Замените `YOUR_TOKEN_HERE` в файле `bot.py` на ваш токен от @BotFather

3. Запустите бота:
```
python bot.py
```

## Как играть

1. Добавьте бота в групповой чат
2. Отправьте команду `/newgame` для начала игры
3. Бот отобразит игровое поле с 9 кнопками (3x3)
4. Игроки по очереди нажимают на кнопки, чтобы сделать ход
5. Бот автоматически определяет победителя или ничью и завершает игру

## Технические детали

- Бот написан на Python с использованием библиотеки python-telegram-bot 20.x
- Используется асинхронный подход с async/await
- Состояние игры хранится в словаре по chat_id 

## Сохранение состояния (База данных)
По умолчанию бот хранит игры и статистику в памяти, что удобно для локального тестирования, но данные теряются при перезапуске или деплое.
### SQLite
- Используется файл `data.db` в корне проекта.
- Подходит для локального запуска, но на бесплатном тарифе Render файловая система эфемерна, и данные сбрасываются после обновления сервиса.
### PostgreSQL на Render
- Рекомендуется использовать бесплатный Managed PostgreSQL от Render (до 100 МБ).
- Создайте базу через панель Render и укажите переменную окружения `DATABASE_URL`, например:
  ```
  postgres://user:password@hostname:5432/dbname
  ```
- Для подключения можно использовать SQLAlchemy или другую ORM, например:
  ```python
  from sqlalchemy import create_engine
  DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///data.db")
  engine = create_engine(DATABASE_URL)
  ``` 